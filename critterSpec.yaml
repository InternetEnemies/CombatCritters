openapi: 3.1.0
x-stoplight:
  id: 8cftjgf1danjn
info:
  title: critterSpec
  version: 0.1.3
  summary: ''
servers:
  - url: 'http://localhost:3000'
paths:
  /cards:
    get:
      summary: Get cards
      tags:
        - cards
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Card'
                  x-stoplight:
                    id: q6cn2lqbok363
      operationId: get-cards
      x-stoplight:
        id: bfxw8s6kp7zqx
      requestBody:
        content: {}
      parameters:
        - schema:
            type: array
            items:
              type: integer
          in: query
          name: id
          description: (optional) array of card ids to get
        - schema:
            type: string
            enum:
              - ID
              - NAME
              - PLAY_COST
              - RARITY
          in: query
          name: order
          description: order of the cards
        - schema:
            type: array
            items:
              type: number
          in: query
          name: rarities
          description: rarities
        - schema:
            type: boolean
          in: query
          name: costLess
          description: filter by less than cost
        - schema:
            type: number
          in: query
          name: cost
          description: cost to filter by
        - schema:
            type: boolean
          in: query
          name: rarityInclude
          description: set high to only include the rarities set
        - schema:
            type: string
          in: query
          name: owned
          description: show only owned cards
  '/cards/{cardid}':
    parameters:
      - schema:
          type: string
        name: cardid
        in: path
        required: true
    get:
      summary: Get a card by its id
      tags:
        - cards
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                $ref: '#/components/schemas/Card'
      operationId: get-cards-cardid
      x-stoplight:
        id: hnsd41zsb96gl
  '/users/{userid}/cards':
    get:
      summary: get the cards in the users inventory
      parameters:
        - schema:
            type: array
            items:
              type: integer
          in: query
          name: id
          description: (optional) array of card ids to get
        - schema:
            type: string
            enum:
              - ID
              - NAME
              - PLAY_COST
              - RARITY
          in: query
          name: order
          description: order of the cards
        - schema:
            type: boolean
          in: query
          name: rarityInclude
          description: set high to only include rarities in set
        - schema:
            type: boolean
          in: query
          name: costLess
          description: show cards with cost less than cost
        - schema:
            type: number
          in: query
          name: cost
          description: cost of cards to filter by
        - schema:
            type: array
            items:
              type: number
          in: query
          name: rarities
          description: list of rarities
        - schema:
            type: string
          in: query
          name: owned
          description: show only owned cards
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  x-stoplight:
                    id: jx3h690nsrukw
                  type: object
                  properties:
                    count:
                      type: integer
                      x-stoplight:
                        id: r11c8zju5ougg
                    item:
                      $ref: '#/components/schemas/Card'
                      x-stoplight:
                        id: 33zi1figmvety
      operationId: get-users-userid-cards
      x-stoplight:
        id: ucu8g5z1vf8m2
      tags:
        - cards
        - inventory
    parameters:
      - schema:
          type: string
        name: userid
        in: path
        required: true
  '/users/{userid}/decks':
    parameters:
      - schema:
          type: string
        name: userid
        in: path
        required: true
    get:
      summary: Get a list of a users decks
      tags:
        - decks
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DeckDetails'
                  x-stoplight:
                    id: bcv6lovn8yjr0
      operationId: get-users-userid-decks
      x-stoplight:
        id: qo67thtyjl87h
    post:
      summary: Create a new deck
      tags:
        - decks
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                $ref: '#/components/schemas/DeckDetails'
      operationId: post-users-userid-decks
      x-stoplight:
        id: 6n63ca4ns38kx
      requestBody:
        content:
          application/json:
            schema:
              type: object
              $ref: '#/components/schemas/DeckDetails'
  '/users/{userid}/decks/{deckid}':
    parameters:
      - schema:
          type: string
        name: userid
        in: path
        required: true
      - schema:
          type: string
        name: deckid
        in: path
        required: true
    delete:
      summary: Delete a deck
      tags:
        - decks
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                $ref: '#/components/schemas/DeckDetails'
      operationId: delete-users-userid-decks-deckid
      x-stoplight:
        id: ia8ck3kdptlsy
  '/users/{userid}/decks/{deckid}/cards':
    parameters:
      - schema:
          type: string
        name: userid
        in: path
        required: true
      - schema:
          type: string
        name: deckid
        in: path
        required: true
    get:
      summary: Get the cards in a deck
      tags:
        - decks
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Card'
                  x-stoplight:
                    id: ao25t6qqw9coo
      operationId: get-users-userid-decks-deckid-cards
      x-stoplight:
        id: l171y3yzu06qq
    put:
      summary: Update the contents of a deck
      tags:
        - decks
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  deck:
                    $ref: '#/components/schemas/Deck'
                    x-stoplight:
                      id: zlv9ph11zvmhc
                  deck_validity:
                    $ref: '#/components/schemas/DeckValidity'
                    x-stoplight:
                      id: zghv39uv2qhfk
      operationId: put-users-userid-decks-deckid-cards
      x-stoplight:
        id: aozyovb7kqu9s
      requestBody:
        content:
          application/json:
            schema:
              type: object
              $ref: '#/components/schemas/Deck'
      parameters: []
  /packs:
    get:
      summary: Get the list of packs
      tags:
        - packs
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Pack'
                  x-stoplight:
                    id: h8qf0046f5gu9
      operationId: get-packs
      x-stoplight:
        id: h5e3vgdu1eftz
      parameters:
        - schema:
            type: boolean
          in: query
          name: owned
          description: show owned packs only?
        - schema:
            type: array
            items:
              type: integer
          in: query
          name: packid
          description: array of packid's to get
  '/packs/{packid}':
    parameters:
      - schema:
          type: string
        name: packid
        in: path
        required: true
    get:
      summary: get a pack from it's id
      tags:
        - packs
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                $ref: '#/components/schemas/Pack'
      operationId: get-packs-packid
      x-stoplight:
        id: h7mwk7h7rou7u
  '/users/{userid}/packs':
    parameters:
      - schema:
          type: string
        name: userid
        in: path
        required: true
    get:
      summary: Get the packs in the users inventory
      tags:
        - packs
        - inventory
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  x-stoplight:
                    id: 47ef911ce5bjx
                  type: object
                  properties:
                    count:
                      type: integer
                      x-stoplight:
                        id: 67erzho95gnh6
                    item:
                      $ref: '#/components/schemas/Pack'
                      x-stoplight:
                        id: lnemaii13vnw8
      operationId: get-users-userid-packs
      x-stoplight:
        id: em8ks0tlev1ku
  '/users/{userid}/packs/{packid}':
    parameters:
      - schema:
          type: string
        name: userid
        in: path
        required: true
      - schema:
          type: string
        name: packid
        in: path
        required: true
    post:
      summary: open the pack from its id
      tags:
        - packs
        - inventory
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                $ref: '#/components/schemas/PackResult'
      operationId: post-users-userid-packs-packid
      x-stoplight:
        id: 4992o8swk90d1
  '/users/{cardid}/decks/{deckid}/validity':
    parameters:
      - schema:
          type: string
        name: cardid
        in: path
        required: true
      - schema:
          type: string
        name: deckid
        in: path
        required: true
    get:
      summary: get the validity object for a deck
      tags:
        - decks
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                $ref: '#/components/schemas/DeckValidity'
      operationId: get-users-cardid-decks-deckid-validity
      x-stoplight:
        id: hwq0x9iz223he
  /decks/validity:
    get:
      summary: Get the deck validity rules object
      tags:
        - decks
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                $ref: '#/components/schemas/DeckRules'
      operationId: get-decks-validity
      x-stoplight:
        id: xp1900zz8v5rj
  /users/auth/login:
    post:
      summary: Login
      tags:
        - Auth
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                $ref: '#/components/schemas/User'
      operationId: post-users-auth-login
      x-stoplight:
        id: 6fmef8g4isswl
      requestBody:
        content:
          application/json:
            schema:
              type: object
              $ref: '#/components/schemas/LoginDetails'
  /users/auth/register:
    post:
      summary: Register
      tags:
        - Auth
      responses: {}
      operationId: post-users-auth-register
      x-stoplight:
        id: o0cadttd8hbw1
      requestBody:
        content:
          application/json:
            schema:
              type: object
              $ref: '#/components/schemas/RegisterDetails'
  /users/auth/logout:
    post:
      summary: Logout
      tags: []
      responses: {}
      operationId: post-users-auth-logout
      x-stoplight:
        id: 3qj8vr24axq1a
  '/users/{userid}/profile':
    parameters:
      - schema:
          type: string
        name: userid
        in: path
        required: true
    get:
      summary: Get a users profile
      tags:
        - profiles
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                $ref: '#/components/schemas/Profile'
      operationId: get-users-userid-profile
      x-stoplight:
        id: u32r0w7dmjp0w
    put:
      summary: update a users profile
      tags:
        - profiles
      responses:
        '200':
          description: OK
          content: {}
      operationId: put-users-userid-profile
      x-stoplight:
        id: 4a0r2ydf8x2fz
      requestBody:
        content:
          application/json:
            schema:
              type: object
              $ref: '#/components/schemas/Profile'
  '/users/{userid}/friends':
    parameters:
      - schema:
          type: string
        name: userid
        in: path
        required: true
    get:
      summary: get a users friends
      tags:
        - friends
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
                  x-stoplight:
                    id: egztug8lui7if
      operationId: get-users-userid-friends
      x-stoplight:
        id: 5s81qn479ig7e
    post:
      summary: add friend
      tags:
        - friends
      responses: {}
      operationId: post-users-userid-friends
      x-stoplight:
        id: amheu1dz2tikw
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                  x-stoplight:
                    id: cpkzaiy0lwwbf
  '/users/{userid}/friends/pending':
    parameters:
      - schema:
          type: string
        name: userid
        in: path
        required: true
    get:
      summary: get pending friend requests
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
                  x-stoplight:
                    id: kr9ey4arxqpc4
      operationId: get-users-userid-friends-pending
      x-stoplight:
        id: vuidne0y30itz
      tags:
        - friends
components:
  schemas:
    User:
      title: User
      type: object
      examples:
        - id: 142
          firstName: Alice
          lastName: Smith
          email: alice.smith@gmail.com
          dateOfBirth: '1997-10-31'
          emailVerified: true
          signUpDate: '2019-08-24'
      x-stoplight:
        id: ilmpe1kwnmw18
      required:
        - username
      properties:
        userid:
          type: integer
          x-stoplight:
            id: 9gx970l43eu3e
        username:
          type: string
          x-stoplight:
            id: hvbdcyej5g5xk
    Card:
      title: Card
      x-stoplight:
        id: yrj3iha5gcrkq
      type: object
      required:
        - name
        - playcost
        - rarity
        - image
        - type
        - type_specific
        - description
      properties:
        cardid:
          type: integer
          x-stoplight:
            id: 37ehgm8tkt7n8
        name:
          type: string
          x-stoplight:
            id: 23n0ai18f4j5p
        playcost:
          type: integer
          x-stoplight:
            id: 72ep58ksv4edl
        rarity:
          type: integer
          x-stoplight:
            id: oa33zeyxiyrmc
        image:
          type: string
          x-stoplight:
            id: j9r3ww6kkojr6
          format: uri
        type:
          x-stoplight:
            id: 2uxepv7petp9i
          enum:
            - critter
            - item
        type_specific:
          x-stoplight:
            id: hsn5my4fh1zj2
          anyOf:
            - $ref: '#/components/schemas/CardCritter'
              x-stoplight:
                id: 1nnlorb7c3fo5
            - $ref: '#/components/schemas/CardItem'
              x-stoplight:
                id: 9amk4iwfn98nh
          oneOf:
            - type: object
              x-stoplight:
                id: n6hmul757qtsp
          type: object
        description:
          type: string
          x-stoplight:
            id: 2pit6xq6hjgi7
    CardCritter:
      title: CardCritter
      x-stoplight:
        id: 5d5n4vuucqzkk
      type: object
      required:
        - damage
        - health
        - abilities
      properties:
        damage:
          type: integer
          x-stoplight:
            id: eh7f8fy2xr8f3
        health:
          type: integer
          x-stoplight:
            id: gw9006tykdeoz
        abilities:
          type: array
          x-stoplight:
            id: coz1ua3uw36zc
          items:
            x-stoplight:
              id: h48nua7lcay1w
            type: integer
    CardItem:
      title: CardItem
      x-stoplight:
        id: 9aq8lj1a7dy5g
      type: object
      required:
        - abilityid
      properties:
        abilityid:
          type: integer
          x-stoplight:
            id: vrsg77nb7fk1d
    DeckDetails:
      title: DeckDetails
      x-stoplight:
        id: d0hy4zhbp02tu
      type: object
      required:
        - name
      properties:
        deckid:
          type: integer
          x-stoplight:
            id: g0lochwc27hut
        name:
          type: string
          x-stoplight:
            id: tgl9lxaq0fvrr
    Deck:
      title: Deck
      x-stoplight:
        id: es0brvvbvi326
      type: object
      required:
        - cards
      properties:
        cards:
          type: array
          x-stoplight:
            id: n5rovs8lzck3f
          description: ordered list of cards in the deck
          items:
            x-stoplight:
              id: 1a5u5hvzpo2fl
            type: integer
    Pack:
      title: Pack
      x-stoplight:
        id: zxkq07g2a8vi9
      type: object
      required:
        - name
        - image
        - contents
      properties:
        packid:
          type: integer
          x-stoplight:
            id: yni4zvdl0clvv
        name:
          type: string
          x-stoplight:
            id: uc717b24mai1o
        image:
          type: string
          x-stoplight:
            id: uz6kfjwveo7mk
          format: uri
        contents:
          type: array
          x-stoplight:
            id: rfaduog13lr1c
          description: list of ids of the cards in the pack
          items:
            x-stoplight:
              id: hj984yzy3z5sq
            type: integer
    PackResult:
      title: PackResult
      x-stoplight:
        id: egilnkloys7n1
      type: object
      properties:
        cards:
          type: array
          x-stoplight:
            id: hbs5i33g5v17r
          items:
            x-stoplight:
              id: fseko00gppa7f
            type: integer
    DeckValidity:
      title: DeckValidity
      x-stoplight:
        id: 7e30d8o1p4zcu
      type: object
      required:
        - isvalid
      properties:
        isvalid:
          type: boolean
          x-stoplight:
            id: lkg8deol3ttyp
        issues:
          type: array
          x-stoplight:
            id: i1sah78ij0grs
          description: list of issues if the deck is invalid
          items:
            x-stoplight:
              id: fa6o5x08usl3r
            type: string
    DeckRules:
      title: DeckRules
      x-stoplight:
        id: 68872wqa062dh
      type: object
      required:
        - min_cards
        - max_cards
        - limit_legend
        - limit_epic
        - limit_rare
        - limit_item
      properties:
        min_cards:
          type: integer
          x-stoplight:
            id: b7d3yuekgjbvv
        max_cards:
          type: integer
          x-stoplight:
            id: koc0c0m9e40hm
        limit_legend:
          type: integer
          x-stoplight:
            id: s6ih43ed6sk5a
        limit_epic:
          type: integer
          x-stoplight:
            id: scohdpad4xqr2
        limit_rare:
          type: integer
          x-stoplight:
            id: hkshtsf7evw44
        limit_item:
          type: integer
          x-stoplight:
            id: 7po091w6n1ipy
    LoginDetails:
      title: LoginDetails
      x-stoplight:
        id: gmw3rqolq5wfy
      type: object
      required:
        - username
        - password
      properties:
        username:
          type: string
          x-stoplight:
            id: 0syhq0wjqep1v
        password:
          type: string
          x-stoplight:
            id: btulswd6fkkx9
    RegisterDetails:
      title: RegisterDetails
      x-stoplight:
        id: k4uds7piw4b6k
      type: object
      required:
        - username
        - password
      properties:
        username:
          type: string
        password:
          type: string
    Profile:
      title: Profile
      x-stoplight:
        id: 07eks6ev3kchc
      type: object
      properties:
        featured_deck:
          $ref: '#/components/schemas/DeckDetails'
          x-stoplight:
            id: mz3u9q2cw2yf1
    Friends:
      title: Friends
      x-stoplight:
        id: qr3zlbhfzis0y
      type: array
      description: array of friends user ids
      items:
        type: object
        $ref: '#/components/schemas/User'
        x-stoplight:
          id: ycp2nlid8wag1
  parameters: {}
